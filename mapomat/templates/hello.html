<!DOCTYPE html>
<html lang="en" ng-app="mapomat">
<head>
    <title>Map-o-Mat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- icon -->
    <link rel="icon" type="image/png"
    href="{{ url_for('static', filename='favicon-32x32.png') }}" sizes="32x32">
    <link rel="icon" type="image/png"
    href="{{ url_for('static', filename='favicon-96x96.png') }}" sizes="96x96">
    <link rel="icon" type="image/png"
    href= "{{ url_for('static', filename='favicon-16x16.png') }}"
    sizes="16x16">

    <!-- bootstrap and angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.4/angular.min.js"></script>
    <script src="https://raw.github.com/angular-ui/angular-ui/master/build/angular-ui.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

    <!-- own scripts -->
    <script>
        // dynamically generated by the server, rest is client side
        window.cityCategories = {{ city_categories|tojson }}
        window.superCatNames = {{ super_categories|tojson }}
        window.subCatNames = {{ categories|tojson }}
    </script>
    <script src="{{ url_for('static', filename='mapomat.js') }}"></script>
</head>
<body>
    <div id="wrap">
    <div class="container"
    style="max-width: 970px; margin-bottom: 30px">
        <img src="{{ url_for('static', filename='mapomat_title.svg') }}"
        class="img-responsive center-block"
        style="margin-top: 30px; margin-bottom: 30px" />
        <p>
            Welcome to Map-o-Mat! This application uses the data published
            in the <a href="http://www.yelp.com/dataset_challenge">yelp
            dataset challenge</a> to automatically order businesses into
            categories (nothing you see here was picked by hand!) and
            display them on maps from
            <a href="https://www.arcgis.com/features/">ArcGIS</a>.<br />
            We are Hermann Blum and Alexander Dietmüller and developed this
            application as part of a group project for the
            <a href="http://disco.ethz.ch">disco group at ETH Zurich</a>.
            <br />
            To start, pick a city and all categories you want to see and
            click "generate". After a little computing this will take you
            to a live map preview.<br />
            (You can also download the overlay as .kml)
        </p>
    </div>
    <div class="container">
        <form action="{{ url_for('hello') }}"
        ng-controller="SelectController">
            {% raw %}
            <div class="row">
                <div class="col-md-4 col-md-offset-4">
                    <select name="city" class="form-control"
                    ng-model="selectedCity">
                        <option ng-repeat="(city, dict) in cityCats"
                        value="{{ city }}">{{ city }}</option>
                        <option value="">-- select a city to start --</option>
                    </select>
                </div>
            </div>
            <br /><br />
            <div class="row">
                <div
                ng-repeat="(super, sublist) in cityCats[selectedCity]"
                class="col-md-3">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            {{ superNames[super] }}
                        </div>
                        <div class="panel-body">

                            <input type="checkbox" name="supercat"
                            value="{{ super }}"
                            ng-model="selection[superNames[super]]"
                            ng-click="updateColors()">
                                all businesses
                            </input>
                            <div ng-repeat="sub in sublist">
                                <input type="checkbox" name="subcat"
                                value="({{super}}, {{sub}})"
                                ng-model="selection[subNames[super][sub]]"
                                ng-click="updateColors()">
                                {{ subNames[super][sub] }}
                                </input>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br \><br \>
            <div class="row">
                <div
                ng-repeat="color in colors">
                    <li>{{color.name}}</li>
                </div>

            </div>
            {% endraw %}

            <button class="btn btn-primary btn-lg btn-block"
                    type="submit"
                    ng-show="selectedCity"
                    style="margin-bottom: 20px"
                    formmethod="post">Generate</button>

        </form>
    </div>
    </div>
    <!--
    <div class="navbar navbar-default" id="footer"
    ng-controller="FooterController as fCtrl"
    ng-style="fCrl.footermargin"
    style="text-align: center; margin-bottom: 0px">
        <div class="container">
        <p class="navbar-text">Map-o-Mat by Hermann Blum and Alexander
        Dietmüller. Logo made with icons by
        <a href="http://www.flaticon.com/authors/freepik" title="Freepik">
        Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">
        www.flaticon.com</a>, licensed by
        <a href="http://creativecommons.org/licenses/by/3.0/"
        title="Creative Commons BY 3.0">CC BY 3.0</a>.
        <a href="http://getbootstrap.com">Bootstrap is used for the design</a>
        and <a href="https://angularjs.org">AngularJS</a> for the scripts.
        </p>
        </div>
    </div>
    -->
</body>
</html>
